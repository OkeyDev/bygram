from .filters import FilterBase as FilterBase
from _typeshed import Incomplete
from bygram.routing.middlewares import MiddlewareBase as MiddlewareBase
from bygram.types.base import Update as Update
from typing import Any, Awaitable, Callable, Iterable, TypeVar

T = TypeVar('T', bound=Update)
Callback = Callable[..., Awaitable[Any]]
logger: Incomplete

def inject_dependencies(callback: Callback, update: Update, data: dict): ...

class Handler:
    callback: Incomplete
    callback_signature: Incomplete
    filters: Incomplete
    def __init__(self, callback: Callback, filters: Iterable[FilterBase]) -> None: ...
    async def is_pass_filters(self, update: Update, data: dict) -> bool: ...
    async def __call__(self, update: Update, data: dict) -> Any: ...

class Router:
    callbacks: dict[type[Update], list[Handler]]
    routers: list[Router]
    middlewares: list[MiddlewareBase]
    def __init__(self) -> None: ...
    def include_router(self, router: Router): ...
    def include_routers(self, *routers: Router): ...
    def add_middleware(self, middleware: MiddlewareBase): ...
    def add_handler(self, type: type[Update], callback: Callback, filters: Iterable[FilterBase]): ...
    def register(self, type: type[Update], *filters: FilterBase): ...

class Dispatcher(Router):
    di: dict[str, Any]
    def __init__(self) -> None: ...
    async def feed_update(self, update: Update, client_id: int): ...
    def __setitem__(self, key: str, value: Any): ...
    def __getitem__(self, key: str): ...
